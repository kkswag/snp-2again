<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1.0, user-scalable=no"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Prompt:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
      integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./src/style.css" />
    <title>Follow Symtom</title>
  </head>
  <body>
    <div class="container-fluid px-0">
      <header>
        <div class="nav">
          <div class="left">
            <div class="logo">
              <img src="./src/img/logo2.png" alt="" />
            </div>
  
            <div class="menu">
              <a href="./home.html">หน้าหลัก</a>
              <a href="./exerTime.html">ออกกำลังกาย</a>
              <a href="./follow.html">ติดตามอาการ</a>
              <!-- <a href="./total.html">สรุปผล</a> -->
            </div>
          </div>
  
          <div class="username">
            <p id="user_name"></p>
          </div>
        </div>
      </header>
    </div>

    <div class="container-fluid text-center mt-5">
      <h1>ติดตามอาการ</h1>
      <div class="row justify-content-center">
        <div class="col-10 mt-5">
          <h3>ส่วนศีรษะ</h3>
          <h4 class="text-start">อาการปวดเป็นอย่างไร (<span>รายละเอียดอาการ</span>) </h4>
            <div class="row justify-content-start mt-4">
              <div class="col-3">
                <input class="form-check-input" type="radio" name="headRadio" id="head-bad-state" value="1">
                <label class="form-check-label ps-2" for="head-bad-state"> แย่ลง ปวดมากขึ้น</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="headRadio" id="head-normal-state" value="2">
                <label class="form-check-label ps-2" for="head-normal-state"> ปวดเท่าเดิม</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="headRadio" id="head-better-state" value="3">
                <label class="form-check-label ps-2" for="head-better-state"> ดีขึ้นเล็กน้อย</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="headRadio" id="head-perfect-state" value="4">
                <label class="form-check-label ps-2" for="head-perfect-state"> ดีขึ้นอย่างมาก</label>
              </div>
            </div>
            <p id="date-follow1" class="text-start pt-5"></p>
            <hr>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-10 mt-5">
          <h3>ส่วนคอ</h3>
          <h4 class="text-start">อาการปวดเป็นอย่างไร (<span>รายละเอียดอาการ</span>) </h4>
            <div class="row justify-content-start mt-4">
              <div class="col-3">
                <input class="form-check-input" type="radio" name="neckRadio" id="neck-bad-state" value="1">
                <label class="form-check-label ps-2" for="neck-bad-state"> แย่ลง ปวดมากขึ้น</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="neckRadio" id="neck-normal-state" value="2">
                <label class="form-check-label ps-2" for="neck-normal-state"> ปวดเท่าเดิม</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="neckRadio" id="neck-better-state" value="3">
                <label class="form-check-label ps-2" for="neck-better-state"> ดีขึ้นเล็กน้อย</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="neckRadio" id="neck-perfect-state" value="4">
                <label class="form-check-label ps-2" for="neck-perfect-state"> ดีขึ้นอย่างมาก</label>
              </div>
            </div>
            <p id="date-follow2" class="text-start pt-5"></p>
            <hr>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-10 mt-5">
          <h3>ส่วนไหล่</h3>
          <h4 class="text-start">อาการปวดเป็นอย่างไร (<span>รายละเอียดอาการ</span>) </h4>
            <div class="row justify-content-start mt-4">
              <div class="col-3">
                <input class="form-check-input" type="radio" name="shoulderRadio" id="shoulder-bad-state" value="1" >
                <label class="form-check-label ps-2" for="shoulder-bad-state"> แย่ลง ปวดมากขึ้น</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="shoulderRadio" id="shoulder-normal-state" value="2" >
                <label class="form-check-label ps-2" for="shoulder-normal-state"> ปวดเท่าเดิม</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="shoulderRadio" id="shoulder-better-state" value="3" >
                <label class="form-check-label ps-2" for="shoulder-better-state"> ดีขึ้นเล็กน้อย</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="shoulderRadio" id="shoulder-perfect-state" value="4" >
                <label class="form-check-label ps-2" for="shoulder-perfect-state"> ดีขึ้นอย่างมาก</label>
              </div>
            </div>
            <p id="date-follow3" class="text-start pt-5"></p>
            <hr>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-10 mt-5">
          <h3>ส่วนสะบัก</h3>
          <h4 class="text-start">อาการปวดเป็นอย่างไร (<span>รายละเอียดอาการ</span>) </h4>
            <div class="row justify-content-start mt-4">
              <div class="col-3">
                <input class="form-check-input" type="radio" name="hipRadio" id="hip-bad-state" value="1">
                <label class="form-check-label ps-2" for="hip-bad-state"> แย่ลง ปวดมากขึ้น</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="hipRadio" id="hip-normal-state" value="2">
                <label class="form-check-label ps-2" for="hip-normal-state"> ปวดเท่าเดิม</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="hipRadio" id="hip-better-state" value="3">
                <label class="form-check-label ps-2" for="hip-better-state"> ดีขึ้นเล็กน้อย</label>
              </div>
              <div class="col-3">
                <input class="form-check-input" type="radio" name="hipRadio" id="hip-perfect-state" value="4">
                <label class="form-check-label ps-2" for="hip-perfect-state"> ดีขึ้นอย่างมาก</label>
              </div>
            </div>
            <p id="date-follow4" class="text-start pt-5"></p>
            <hr>
        </div>
      </div>
      <div class="row my-4 justify-content-center">
        <div class="col-10">
          <button id="btn-symptom" class="w-25">บันทึกผล</button>
        </div>
      </div>
    </div>
    <div class="container-fluid footer">
      <div class="row justify-content-between align-items-center">
        <div class="col-6">
          <img src="./src/img/logo2NT.png" alt="" />
        </div>
        <div class="col-6 text-end ps-3">
          <p class="mb-0">2022 SNP .All Rights Reserved</p>
        </div>
      </div>
    </div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.6/dat.gui.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/r16/Stats.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  $(document).ready(function () {
  let username = $("#user_name");
  let get_user = localStorage.getItem("username");
  username.append(get_user);

  username.click(function() {
    localStorage.removeItem("username");
    window.location.replace("./login.html");
  });

  const currentDate = new Date();
  const options = { day: 'numeric', month: 'long', year: 'numeric' };
  const formattedDate = currentDate.toLocaleDateString('th-TH', options);
  console.log(formattedDate);
  
  const dateFollowElements = document.querySelectorAll('#date-follow4, #date-follow3, #date-follow2, #date-follow1');
  dateFollowElements.forEach(element => {
    element.textContent = `อาการเมื่อวันที่ ${formattedDate}`;
  });


  var levels = {};

  const headRadios = document.querySelectorAll('input[name="headRadio"]');
  headRadios.forEach(function(radio) {
    radio.addEventListener('change', function() {
      levels.head = $(this).val();
      console.log("Section head: Level " + levels.head);
    });
  });

  const neckRadios = document.querySelectorAll('input[name="neckRadio"]');
  neckRadios.forEach(function(radio) {
    radio.addEventListener('change', function() {
      levels.neck = $(this).val();
      console.log("Section neck: Level " + levels.neck);
    });
  });

  const shoulderRadios = document.querySelectorAll('input[name="shoulderRadio"]');
  shoulderRadios.forEach(function(radio) {
    radio.addEventListener('change', function() {
      levels.shoulder = $(this).val();
      console.log("Section shoulder: Level " + levels.shoulder);
    });
  });

  const hipRadios = document.querySelectorAll('input[name="hipRadio"]');
  hipRadios.forEach(function(radio) {
    radio.addEventListener('change', function() {
      levels.hip = $(this).val();
      console.log("Section hip: Level " + levels.hip);
    });
  });

  const btnSymptom = $('#btn-symptom');
  btnSymptom.click(function() {
    sendDataToPHP(levels);
  });
});

function sendDataToPHP(data) {
  let user = localStorage.getItem("username");
  data.username = user;

  $.ajax({
    url: 'http://localhost:428/test/followSymptom.php',
    type: 'POST',
    data: data, // Send the data directly as an object
    success: function(response) {
      console.log(response);
      if (response == "success") {
        Swal.fire({
          position: 'top-center',
          icon: 'success',
          title: 'บันทึกข้อมูลสำเร็จ',
          showConfirmButton: false,
          timer: 1500
        })
        setTimeout(() => {
          window.location.href = '/home.html';
        }, 1500);
      } else {
        Swal.fire({
          position: 'top-center',
          icon: 'error',
          title: 'บันทึกข้อมูลไม่สำเร็จ',
          showConfirmButton: false,
          timer: 1500
        })
        setTimeout(() => {
          window.location.reload();
        }, 1500);
      }
    },
    error: function(xhr, status, error) {
      // Handle errors
      console.error(error);
    }
  });
}

</script>
</html>
