<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0, user-scalable=no">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.2/js/bootstrap.min.js" integrity="sha512-5BqtYqlWfJemW5+v+TZUs22uigI8tXeVah5S/1Z6qBLVO7gakAOtkOzUtgq6dsIo5c0NJdmGPs0H9I+2OHUHVQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="/style.c61ab535.css">
    <title>Exercise Time</title>
  </head>
  <body>
    <header>
      <div class="nav">
        <div class="left">
          <div class="logo">
            <img src="/logo2.cf598e60.png" alt="">
          </div>

          <div class="menu">
            <a href="/home.html">หน้าหลัก</a>
            <a href="">ออกกำลังกาย</a>
            <a href="/follow.html">ติดตามอาการ</a>
            <!-- <a href="./total.html">สรุปผล</a> -->
          </div>
        </div>

        <div class="username">
          <p id="user_name"></p>
        </div>
      </div>
    </header>

    <section>
      <div class="selectTime">
        <div class="headTime">
          <h1>ช่วงเวลาการออกกำลังกาย</h1>
        </div>
        <div id="wrap">
          <div class="cropboxTime">
            <h1>คำแนะนำ : ควรเลือกช่วงเวลาอย่างน้อย 2 ช่วงขึ้นไป</h1>
            <p>เลือกวันที่ในการออกกำลังกาย</p>
            <input type="date" id="date_one">
            <div class="boxTime">
              <div class="leftTime">
                <!-- <input type="date" id="date" /> -->
              </div>

              <div class="rightTime">
                <div class="fTime">
                  <div class="fHeadTime">
                    <p>ช่วงที่ 1</p>
                    <!-- <p id="output_date"></p> -->
                    <!-- <input type="date" id="date_one" /> -->

                    <!-- <i class="fa-solid fa-gear"></i>
                    <i class="fa-sharp fa-solid fa-trash"></i> -->
                  </div>

                  <div class="selectFirstET">
                    <div class="seTime">
                      <p>เลือกช่วงเวลา</p>
                      <select class="form-select" aria-label="Default select example" id="time_one">
                        <!-- <option value="00 : 00 AM">00 : 00 AM</option>
                        <option value="01 : 00 AM">01 : 00 AM</option>
                        <option value="02 : 00 AM">02 : 00 AM</option>
                        <option value="03 : 00 AM">03 : 00 AM</option>
                        <option value="04 : 00 AM">04 : 00 AM</option> -->
                        <option value="05 : 00 AM">05 : 00 AM</option>
                        <option value="06 : 00 AM">06 : 00 AM</option>
                        <option value="07 : 00 AM">07 : 00 AM</option>
                        <option value="08 : 00 AM">08 : 00 AM</option>
                        <option value="09 : 00 AM">09 : 00 AM</option>
                        <option value="10 : 00 AM">10 : 00 AM</option>
                        <option value="11 : 00 AM">11 : 00 AM</option>
                        <option value="12 : 00 PM">12 : 00 PM</option>
                        <option value="13 : 00 PM">13 : 00 PM</option>
                        <option value="14 : 00 PM">14 : 00 PM</option>
                        <option value="15 : 00 PM">15 : 00 PM</option>
                        <option value="16 : 00 PM">16 : 00 PM</option>
                        <option value="17 : 00 PM">17 : 00 PM</option>
                        <option value="18 : 00 PM">18 : 00 PM</option>
                        <option value="19 : 00 PM">19 : 00 PM</option>
                        <option value="20 : 00 PM">20 : 00 PM</option>
                        <!-- <option value="21 : 00 PM">21 : 00 PM</option>
                        <option value="22 : 00 PM">22 : 00 PM</option>
                        <option value="23 : 00 PM">23 : 00 PM</option> -->
                      </select>
                      <!-- <input
                        type="time"
                        id="time_one"
                        name="time"
                        min="00:00"
                        max="23:59"
                        step="1"
                      /> -->
                    </div>

                    <div class="warnForwordF">
                      <p>แจ้งเตือนล่วงหน้า</p>
                      <select class="form-select" aria-label="Default select example" id="alarm_one">
                        <!-- <option selected>Open this select menu</option> -->
                        <option value="5 นาที">5 นาที</option>
                        <option value="10 นาที">10 นาที</option>
                        <option value="15 นาที">15 นาที</option>
                        <option value="20 นาที">20 นาที</option>
                        <option value="25 นาที">25 นาที</option>
                        <option value="30 นาที">30 นาที</option>
                      </select>
                    </div>

                    <!-- <div class="timeForPerpost"> -->
                      <!-- <p>
                        *ระยะเวลาในการออกกำลังกายขึ้นอยู่กับระดับอาการของคุณ
                      </p> -->
                      <!-- <select
                        class="form-select"
                        aria-label="Default select example"
                      >
                        <option value="1">2 นาที</option>
                        <option value="2">3 นาที</option>
                        <option value="3">4 นาที</option>
                        <option value="4">5 นาที</option>
                      </select> -->
                    <!-- </div> -->

                  </div>

                  <div class="tip">
                    <p>
                      *ระยะเวลาในการออกกำลังกายขึ้นอยู่กับระดับอาการของคุณ
                    </p>
                  </div>


                  <div class="startExercise">
                    <!-- <button>บันทึก</button> -->
                    <button id="save">บันทึก</button>
                    <a href="/index.html"><button class="startEx">เริ่มออกกำลังกาย</button></a>
                  </div>

                  <!-- <hr /> -->

                  <!-- <div class="fHeadTime">
                    <p>ช่วงที่ 2</p>
                    <input type="date" id="date_two" />
                    <i class="fa-solid fa-gear"></i>
                    <i class="fa-sharp fa-solid fa-trash"></i>
                  </div> -->

                  <!-- <div class="selectFirstET">
                    <div class="seTime">
                      <p>เลือกช่วงเวลา</p>
                      <select
                        class="form-select"
                        aria-label="Default select example"
                        id="time_two"
                      >
                        <option value="00 : 00 AM">00 : 00 AM</option>
                        <option value="01 : 00 AM">01 : 00 AM</option>
                        <option value="02 : 00 AM">02 : 00 AM</option>
                        <option value="03 : 00 AM">03 : 00 AM</option>
                        <option value="04 : 00 AM">04 : 00 AM</option>
                        <option value="05 : 00 AM">05 : 00 AM</option>
                        <option value="06 : 00 AM">06 : 00 AM</option>
                        <option value="07 : 00 AM">07 : 00 AM</option>
                        <option value="08 : 00 AM">08 : 00 AM</option>
                        <option value="09 : 00 AM">09 : 00 AM</option>
                        <option value="10 : 00 AM">10 : 00 AM</option>
                        <option value="11 : 00 AM">11 : 00 AM</option>
                        <option value="12 : 00 PM">12 : 00 PM</option>
                        <option value="13 : 00 PM">13 : 00 PM</option>
                        <option value="14 : 00 PM">14 : 00 PM</option>
                        <option value="15 : 00 PM">15 : 00 PM</option>
                        <option value="16 : 00 PM">16 : 00 PM</option>
                        <option value="17 : 00 PM">17 : 00 PM</option>
                        <option value="18 : 00 PM">18 : 00 PM</option>
                        <option value="19 : 00 PM">19 : 00 PM</option>
                        <option value="20 : 00 PM">20 : 00 PM</option>
                        <option value="21 : 00 PM">21 : 00 PM</option>
                        <option value="22 : 00 PM">22 : 00 PM</option>
                        <option value="23 : 00 PM">23 : 00 PM</option>
                      </select>
                    </div>

                    <div class="warnForwordF">
                      <p>เลือกแจ้งเตือนล่วงหน้า</p>
                      <select
                        class="form-select"
                        aria-label="Default select example"
                        id="alarm_two"
                      >
                        <option value="5 นาที">5 นาที</option>
                        <option value="10 นาที">10 นาที</option>
                        <option value="15 นาที">15 นาที</option>
                        <option value="20 นาที">20 นาที</option>
                        <option value="25 นาที">25 นาที</option>
                        <option value="30 นาที">30 นาที</option>
                      </select>
                    </div>

                    <div class="timeForPerpost">
                      <p>
                        *ระยะเวลาในการออกกำลังกายขึ้นอยู่กับระดับอาการของคุณ
                      </p>
                      <select
                        class="form-select"
                        aria-label="Default select example"
                      >
                        <option value="1">2 นาที</option>
                        <option value="2">3 นาที</option>
                        <option value="3">4 นาที</option>
                        <option value="4">5 นาที</option>
                      </select>
                    </div>
                  </div> -->

                  <!-- <div class="startExercise">
                    <a href="#"><button>รอเวลาออกกำลังกาย</button></a>
                  </div>
                  <hr /> -->
                  <!-- <hr class="hrEnd" /> -->
                </div>
              </div>
            </div>

            <!-- <div class="addExercise">
              <button>
                <i class="fa-solid fa-plus"></i> เพิ่มจำนวนครั้งในการออกกำลังกาย
              </button>
            </div> -->
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="logoFooter">
        <img src="/logo2NT.3d9f9726.png" alt="">
      </div>
      <div class="ads">
        <p>2022 SNP .All Rights Reserved</p>
      </div>
    </footer>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>var username = document.getElementById("user_name");
var get_user = localStorage.getItem("username");
username.append(get_user);
$("#user_name").click(function () {
  localStorage.removeItem("username");
  window.location.replace("./login.html");
});
var dateInput1 = document.getElementById("date_one");
// var dateInput2 = document.getElementById("date_two");

dateInput1.addEventListener("input", function (event) {
  var selectedDate = new Date(event.target.value);
  var currentTime = new Date();
  var year = selectedDate.getFullYear();
  var month = ("0" + (selectedDate.getMonth() + 1)).slice(-2);
  var date = ("0" + selectedDate.getDate()).slice(-2);
  var hours = ("0" + currentTime.getHours()).slice(-2);
  var minutes = ("0" + currentTime.getMinutes()).slice(-2);
  var seconds = ("0" + currentTime.getSeconds()).slice(-2);
  var datetimeString = year + "-" + month + "-" + date + "T" + hours + ":" + minutes + ":" + seconds + ".000Z";
  console.log("Date1: " + datetimeString);
});
$(document).ready(function () {
  $("#time_one").change(function () {
    console.log($(this).val());
  });
  $("#alarm_one").change(function () {
    console.log($(this).val());
  });
  // $("#time_two").change(function () {
  //   console.log($(this).val());
  // });
  // $("#alarm_two").change(function () {
  //   console.log($(this).val());
  // });
});

var btn_save = $("#save");
btn_save.click(function () {
  var get_date = dateInput1.value;
  var get_time = $("#time_one").val();
  var get_alarm = $("#alarm_one").val();
  var time_cut = get_time.replace(" AM", "");
  console.log(time_cut);
  var hours = time_cut.substring(0, 4);
  var minutes = time_cut.substring(4);
  var send_time = hours + minutes;
  var new_hour = parseInt(hours);
  var new_minute = parseInt(minutes);
  var send_alarm = parseInt(get_alarm.replace(" นาที", ""));
  var time_dif = parseInt(new_minute) - send_alarm;
  var time_hour = new_hour - 1;
  var time_min = 60 + time_dif;
  var time_noti = "0" + time_hour + " : " + time_min;
  console.log(time_noti);
  var data = {
    "date": get_date,
    "time": send_time,
    "alarm": time_noti
  };
  console.table(data);
  $.ajax({
    method: "POST",
    url: "http://localhost:428/test/line-notification.php",
    data: {
      "date": get_date,
      "time": send_time,
      "alarm": time_noti
    },
    success: function success(response) {
      console.log(response);
      if (response == "success") {
        Swal.fire({
          position: 'top-center',
          icon: 'success',
          title: 'ส่งการแจ้งเตือนสำเร็จแล้ว',
          showConfirmButton: false,
          timer: 1500
        });
      } else {
        Swal.fire({
          icon: 'error',
          title: 'ขออภัย...',
          text: 'ไม่สามารถส่งการแจ้งเตือนได้'
        });
      }
    }
  });
});</script>
</html>
